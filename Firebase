#include <WiFi.h>
#include <WiFiAP.h>
#include <WiFiClient.h>
#include <WiFiGeneric.h>
#include <WiFiMulti.h>
#include <WiFiScan.h>
#include <WiFiServer.h>
#include <M5Core2.h>
#include <WiFiSTA.h>
#include <WiFiType.h>
#include <WiFiUdp.h>
#include <ArduinoJson.h>
#include <IOXhop_FirebaseESP32.h>
#include <IOXhop_FirebaseStream.h>
#include "secret.h"

// Assignment 8.1
void setup() {
 Serial.begin(115200);
 M5.begin();
 WiFi.begin(SECRET_SSID, SECRET_PASS);
 Serial.print("Connecting ");
 while (WiFi.status() != WL_CONNECTED) {
   Serial.print(".");
   delay(500);
   Firebase.begin(FIREBASE_HOST, FIREBASE_AUTH);
Firebase.setString("Screen_Color", "Black");
 }
 Serial.println();
 Serial.print("Connected: ");
 Serial.println(WiFi.localIP());
  }


void loop() {
 String fireStatus = Firebase.getString("Screen_Color");
 if (fireStatus == "Black") {
   Serial.println("Screen black");
   M5.Lcd.fillScreen(BLACK);
 } else if (fireStatus == "Red") {
   Serial.println("Red");
   M5.Lcd.fillScreen(RED);
 } else {
   Serial.println("non viable color");
 }
}
